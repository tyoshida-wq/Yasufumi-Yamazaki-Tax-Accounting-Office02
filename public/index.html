<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>山崎奏史税理士事務所 議事録生成アプリ</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/style.css" />
    <style>
      /* カスタムスタイル */
      .record-button {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background: linear-gradient(135deg, #4F7FFF 0%, #3B5FDB 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        color: white;
        font-size: 18px;
        font-weight: 600;
        box-shadow: 0 10px 30px rgba(79, 127, 255, 0.3);
        transition: all 0.3s ease;
        cursor: pointer;
        border: none;
      }
      
      .record-button:hover {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(79, 127, 255, 0.4);
      }
      
      .record-button:active {
        transform: scale(0.95);
      }
      
      .record-button.recording {
        background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
        animation: pulse 1.5s infinite;
      }
      
      @keyframes pulse {
        0%, 100% {
          box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
        }
        50% {
          box-shadow: 0 15px 50px rgba(239, 68, 68, 0.5);
        }
      }
      
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: white;
        border-top: 1px solid #E2E8F0;
        display: flex;
        justify-content: space-around;
        padding: 12px 0;
        z-index: 1000;
      }
      
      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: #94A3B8;
        font-size: 12px;
        text-decoration: none;
        position: relative;
      }
      
      .nav-item.active {
        color: #4F7FFF;
      }
      
      .nav-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #EF4444;
        color: white;
        border-radius: 12px;
        padding: 2px 6px;
        font-size: 10px;
        font-weight: 600;
        min-width: 20px;
        text-align: center;
      }
      
      .page {
        display: none;
        padding-bottom: 80px;
      }
      
      .page.active {
        display: block;
      }
      
      .meeting-card {
        background: white;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .status-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }
      
      .status-badge.completed {
        background: #D1FAE5;
        color: #059669;
      }
      
      .status-badge.error {
        background: #FEE2E2;
        color: #DC2626;
      }
      
      .status-badge.processing {
        background: #DBEAFE;
        color: #2563EB;
      }
    </style>
  </head>
  <body class="min-h-screen bg-gray-50">
    <!-- ホーム画面 -->
    <div id="page-home" class="page active">
      <header class="bg-white border-b border-gray-200 px-6 py-4">
        <p class="text-sm text-gray-600">山崎奏史税理士事務所</p>
        <h1 class="text-xl font-bold text-gray-900">議事録生成アプリ</h1>
      </header>
      
      <main class="px-6 py-8">
        <div class="text-center mb-8">
          <p class="text-gray-600 mb-2">ボタンを押すと音声認識が始まります</p>
        </div>
        
        <!-- 録音ボタン -->
        <div class="flex justify-center mb-8">
          <button id="record-button" class="record-button">
            <svg class="w-16 h-16 mb-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
              <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
            <span id="record-text">録音開始</span>
          </button>
        </div>
        
        <!-- 録音タイマー -->
        <div id="record-timer-container" class="text-center mb-8 hidden">
          <div class="text-4xl font-bold text-gray-900" id="record-timer">00:00:00</div>
          <div class="text-sm text-gray-500 mt-2">録音中...</div>
        </div>
        
        <!-- 音声ファイルをアップロード -->
        <button id="upload-button" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-4 px-6 rounded-lg shadow-lg flex items-center justify-center mb-4">
          <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
            <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
          </svg>
          音声ファイルをアップロード
        </button>
        <input type="file" id="file-input" accept="audio/*" class="hidden" />
        
        <!-- 過去の議事録を確認 -->
        <button id="history-button" class="w-full bg-white hover:bg-gray-50 text-gray-700 font-semibold py-4 px-6 rounded-lg shadow border border-gray-200 flex items-center justify-center">
          <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
          </svg>
          過去の議事録を確認
        </button>
        
        <!-- Voice Recognition System -->
        <div class="flex justify-center mt-8">
          <div class="text-center">
            <svg class="w-16 h-16 mx-auto text-blue-500" fill="currentColor" viewBox="0 0 24 24">
              <rect x="4" y="2" width="4" height="20" rx="2"/>
              <rect x="10" y="6" width="4" height="12" rx="2"/>
              <rect x="16" y="2" width="4" height="20" rx="2"/>
            </svg>
            <p class="text-xs text-gray-500 mt-2">VOICE RECOGNITION SYSTEM</p>
          </div>
        </div>
      </main>
    </div>
    
    <!-- 履歴画面 -->
    <div id="page-history" class="page">
      <header class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
        <h1 class="text-xl font-bold text-gray-900">過去の議事録</h1>
        <button id="refresh-history" class="text-blue-500">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </button>
      </header>
      
      <main class="px-6 py-4">
        <!-- 検索バー -->
        <div class="mb-4">
          <div class="flex gap-2">
            <input 
              type="text" 
              id="search-input" 
              placeholder="会議を検索（タイトル）"
              class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <button id="search-button" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg">
              検索
            </button>
          </div>
        </div>
        
        <!-- 会議リスト -->
        <div id="meeting-list" class="space-y-3">
          <div class="text-center text-gray-500 py-8">履歴を読み込んでいます...</div>
        </div>
      </main>
    </div>
    
    <!-- 管理画面 -->
    <div id="page-admin" class="page">
      <header class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <svg class="w-6 h-6 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
          </svg>
          <h1 class="text-xl font-bold text-gray-900">エラーログ</h1>
        </div>
        <button id="refresh-errors" class="text-blue-500">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </button>
      </header>
      
      <main class="px-6 py-4">
        <!-- エラー統計 -->
        <div class="grid grid-cols-2 gap-4 mb-6">
          <div class="bg-white rounded-lg p-4 text-center shadow">
            <div class="text-3xl font-bold text-gray-900" id="total-errors">117</div>
            <div class="text-sm text-gray-500">総エラー数</div>
          </div>
          <div class="bg-white rounded-lg p-4 text-center shadow">
            <div class="text-3xl font-bold text-orange-500" id="pending-errors">70</div>
            <div class="text-sm text-gray-500">未解決</div>
          </div>
          <div class="bg-white rounded-lg p-4 text-center shadow">
            <div class="text-3xl font-bold text-blue-500" id="frontend-errors">16</div>
            <div class="text-sm text-gray-500">フロントエンド</div>
          </div>
          <div class="bg-white rounded-lg p-4 text-center shadow">
            <div class="text-3xl font-bold text-green-500" id="backend-errors">101</div>
            <div class="text-sm text-gray-500">バックエンド</div>
          </div>
        </div>
        
        <!-- エラーリスト -->
        <div id="error-list" class="space-y-3">
          <!-- エラーカードはJavaScriptで動的に生成 -->
        </div>
      </main>
    </div>
    
    
    <!-- オーディオプレイヤーモーダル -->
    <div id="audio-player-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50" style="display: none;">
      <div class="bg-white rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-bold text-gray-900">音声再生</h3>
          <button id="close-player" class="text-gray-400 hover:text-gray-600">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>
        
        <div class="mb-4">
          <p class="text-sm text-gray-600 mb-2" id="player-title">会議音声</p>
          <p class="text-xs text-gray-400" id="player-date"></p>
        </div>
        
        <audio id="modal-audio-player" controls class="w-full">
          <source id="modal-audio-source" src="" type="audio/webm">
          お使いのブラウザは音声再生に対応していません。
        </audio>
        
        <div class="mt-4 text-xs text-gray-500">
          <p>※ 音声ファイルの読み込みに時間がかかる場合があります</p>
        </div>
      </div>
    </div>
    
    <!-- ボトムナビゲーション -->
    <nav class="bottom-nav">
      <a href="#home" class="nav-item active" id="nav-home" data-page="home">
        <svg class="w-6 h-6 mb-1" fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        <span>ホーム</span>
      </a>
      <a href="#history" class="nav-item" id="nav-history" data-page="history">
        <svg class="w-6 h-6 mb-1" fill="currentColor" viewBox="0 0 24 24">
          <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
        </svg>
        <span>履歴</span>
      </a>
      <a href="#admin" class="nav-item" id="nav-admin" data-page="admin">
        <svg class="w-6 h-6 mb-1" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
        </svg>
        <span>管理</span>
        <span class="nav-badge" id="error-count">70</span>
      </a>
    </nav>
    
    <!-- 隠しエレメント（バックエンドとの連携用） -->
    <audio id="audio-player" class="hidden"></audio>
    <canvas id="waveform-canvas" class="hidden"></canvas>
    
    <script type="module" src="/static/app.js?v=20260203064000"></script>
  </body>
</html>
